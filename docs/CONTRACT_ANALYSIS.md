# MarketFactoryV2 åˆçº¦åˆ†æä¸å»ºè®®

## ğŸ“‹ å½“å‰åˆçº¦åˆ†æ

### åˆçº¦åœ°å€
- **Base Sepolia:** `0xF3eA8120BEd32a9E5229D832F305BE3335342Cfb`

### å½“å‰å®ç°

```solidity
function createMarket(string memory _question) public returns (address) {
    MarketV2 newMarket = new MarketV2(
        _question,
        msg.sender,
        collateralToken 
    );
    address newMarketAddress = address(newMarket);
    allMarkets.push(newMarketAddress);
    emit MarketCreated(newMarketAddress, _question, msg.sender);
    return newMarketAddress;
}
```

---

## âš ï¸ å½“å‰é™åˆ¶ä¸é—®é¢˜

### 1. **åŠŸèƒ½é™åˆ¶**

#### é—®é¢˜ A: åªæ¥å—é—®é¢˜å­—ç¬¦ä¸²
- **ç°çŠ¶ï¼š** `createMarket` åªæ¥å—ä¸€ä¸ª `_question` å‚æ•°
- **å½±å“ï¼š** 
  - æ— æ³•å•ç‹¬å­˜å‚¨æè¿°ã€åˆ†ç±»ã€ç»“æŸæ—¶é—´ç­‰å…ƒæ•°æ®
  - å‰ç«¯éœ€è¦å°†æè¿°åˆå¹¶åˆ°é—®é¢˜ä¸­ï¼Œå¯¼è‡´é“¾ä¸Šå­˜å‚¨æ··ä¹±
  - æ— æ³•åœ¨é“¾ä¸ŠæŸ¥è¯¢åˆ†ç±»ã€ç»“æŸæ—¶é—´ç­‰ä¿¡æ¯

#### é—®é¢˜ B: ç¼ºå°‘å…ƒæ•°æ®æ”¯æŒ
- **ç°çŠ¶ï¼š** åˆçº¦ä¸å­˜å‚¨ï¼š
  - å¸‚åœºåˆ†ç±»ï¼ˆFinance, Crypto, etc.ï¼‰
  - ç»“æŸæ—¶é—´
  - å›¾ç‰‡ URL
  - åˆ›å»ºæ—¶é—´æˆ³
- **å½±å“ï¼š** å‰ç«¯å¿…é¡»ç»´æŠ¤å•ç‹¬çš„æ•°æ®åº“æˆ–ä½¿ç”¨ IPFS

#### é—®é¢˜ C: éœ€è¦æ‰‹åŠ¨è®¾ç½®æ± åœ°å€
- **ç°çŠ¶ï¼š** åˆ›å»ºå¸‚åœºåï¼Œåˆ›å»ºè€…éœ€è¦æ‰‹åŠ¨è°ƒç”¨ `setPoolAddresses`
- **å½±å“ï¼š** 
  - ç”¨æˆ·ä½“éªŒå·®
  - å®¹æ˜“å¿˜è®°è®¾ç½®
  - å¸‚åœºå¯èƒ½æ— æ³•äº¤æ˜“

---

### 2. **æŠ€æœ¯å€ºåŠ¡**

#### é—®é¢˜ D: æ— æ³•æ‰©å±•
- **ç°çŠ¶ï¼š** å¦‚æœå°†æ¥éœ€è¦æ·»åŠ æ–°åŠŸèƒ½ï¼Œå¿…é¡»éƒ¨ç½²æ–°åˆçº¦
- **å½±å“ï¼š** éœ€è¦è¿ç§»æ‰€æœ‰ç°æœ‰å¸‚åœº

#### é—®é¢˜ E: ç¼ºå°‘è®¿é—®æ§åˆ¶
- **ç°çŠ¶ï¼š** ä»»ä½•äººéƒ½å¯ä»¥åˆ›å»ºå¸‚åœº
- **å½±å“ï¼š** 
  - å¯èƒ½äº§ç”Ÿåƒåœ¾å¸‚åœº
  - æ— æ³•å®æ–½åˆ›å»ºè´¹ç”¨æˆ–é™åˆ¶

---

## ğŸ’¡ å»ºè®®æ–¹æ¡ˆ

### æ–¹æ¡ˆ A: ç»§ç»­ä½¿ç”¨å½“å‰åˆçº¦ï¼ˆæ¨èç”¨äº Phase 1ï¼‰

#### âœ… ä¼˜ç‚¹
1. **å·²éƒ¨ç½²å¯ç”¨** - æ— éœ€é‡æ–°éƒ¨ç½²
2. **å¿«é€Ÿå¼€å‘** - å¯ä»¥ç«‹å³å¼€å§‹æµ‹è¯•
3. **æˆæœ¬ä½** - æ— éœ€æ”¯ä»˜æ–°çš„éƒ¨ç½²è´¹ç”¨
4. **é£é™©ä½** - å·²æœ‰åˆçº¦ç»è¿‡æµ‹è¯•

#### âŒ ç¼ºç‚¹
1. **åŠŸèƒ½å—é™** - æ— æ³•å­˜å‚¨å…ƒæ•°æ®
2. **ç”¨æˆ·ä½“éªŒ** - éœ€è¦æ‰‹åŠ¨è®¾ç½®æ± åœ°å€
3. **æ‰©å±•æ€§å·®** - æœªæ¥å¯èƒ½éœ€è¦è¿ç§»

#### ğŸ“ å®æ–½å»ºè®®
- **çŸ­æœŸï¼ˆPhase 1-2ï¼‰ï¼š** ç»§ç»­ä½¿ç”¨å½“å‰åˆçº¦
- **å‰ç«¯å¤„ç†ï¼š** 
  - å°†æè¿°åˆå¹¶åˆ°é—®é¢˜ä¸­ï¼ˆç”¨æ¢è¡Œç¬¦åˆ†éš”ï¼‰
  - ä½¿ç”¨ IPFS å­˜å‚¨å®Œæ•´å…ƒæ•°æ®
  - å‰ç«¯ç»´æŠ¤å…ƒæ•°æ®æ˜ å°„ï¼ˆå¸‚åœºåœ°å€ â†’ å…ƒæ•°æ®ï¼‰
- **ä¸­æœŸï¼ˆPhase 3ï¼‰ï¼š** è€ƒè™‘éƒ¨ç½²æ–°ç‰ˆæœ¬åˆçº¦

---

### æ–¹æ¡ˆ B: éƒ¨ç½²æ”¹è¿›ç‰ˆåˆçº¦ï¼ˆæ¨èç”¨äº Phase 3+ï¼‰

#### âœ… ä¼˜ç‚¹
1. **åŠŸèƒ½å®Œæ•´** - æ”¯æŒæ‰€æœ‰éœ€è¦çš„å…ƒæ•°æ®
2. **ç”¨æˆ·ä½“éªŒå¥½** - è‡ªåŠ¨åˆ›å»ºæ± åœ°å€
3. **å¯æ‰©å±•** - æ˜“äºæ·»åŠ æ–°åŠŸèƒ½
4. **æœªæ¥è¯æ˜** - æ”¯æŒé•¿æœŸå‘å±•

#### âŒ ç¼ºç‚¹
1. **éœ€è¦é‡æ–°éƒ¨ç½²** - éœ€è¦ Gas è´¹ç”¨
2. **éœ€è¦è¿ç§»** - ç°æœ‰å¸‚åœºéœ€è¦å¤„ç†
3. **å¼€å‘æ—¶é—´** - éœ€è¦ç¼–å†™å’Œæµ‹è¯•æ–°åˆçº¦
4. **é£é™©** - æ–°åˆçº¦å¯èƒ½æœ‰æœªå‘ç°çš„ bug

#### ğŸ“ æ”¹è¿›ç‰ˆåˆçº¦å»ºè®®

```solidity
// MarketFactoryV3.sol (å»ºè®®)
contract MarketFactoryV3 {
    struct MarketMetadata {
        string question;
        string description;
        string category;
        uint256 endTime;
        string imageUrl;
        address creator;
        uint256 createdAt;
    }
    
    mapping(address => MarketMetadata) public marketMetadata;
    address[] public allMarkets;
    
    event MarketCreated(
        address indexed marketAddress,
        MarketMetadata metadata,
        address indexed creator
    );
    
    function createMarket(
        string memory _question,
        string memory _description,
        string memory _category,
        uint256 _endTime,
        string memory _imageUrl
    ) public returns (address) {
        // 1. éƒ¨ç½² MarketV2
        MarketV2 newMarket = new MarketV2(_question, msg.sender, collateralToken);
        address marketAddress = address(newMarket);
        
        // 2. å­˜å‚¨å…ƒæ•°æ®
        marketMetadata[marketAddress] = MarketMetadata({
            question: _question,
            description: _description,
            category: _category,
            endTime: _endTime,
            imageUrl: _imageUrl,
            creator: msg.sender,
            createdAt: block.timestamp
        });
        
        // 3. è‡ªåŠ¨åˆ›å»º Uniswap æ± ï¼ˆå¯é€‰ï¼‰
        // createPoolsForMarket(marketAddress);
        
        allMarkets.push(marketAddress);
        emit MarketCreated(marketAddress, marketMetadata[marketAddress], msg.sender);
        
        return marketAddress;
    }
}
```

---

## ğŸ”„ å…³äºé‡æ–°éƒ¨ç½²

### å¦‚æœæ›´æ–° Solidity ä»£ç ï¼Œæ˜¯å¦éœ€è¦é‡æ–°éƒ¨ç½²ï¼Ÿ

**ç­”æ¡ˆï¼šæ˜¯çš„ï¼Œå¿…é¡»é‡æ–°éƒ¨ç½²ã€‚**

#### åŸå› 
1. **æ™ºèƒ½åˆçº¦ä¸å¯å˜** - ä¸€æ—¦éƒ¨ç½²ï¼Œä»£ç æ— æ³•ä¿®æ”¹
2. **æ–°åˆçº¦ = æ–°åœ°å€** - æ¯æ¬¡éƒ¨ç½²éƒ½ä¼šç”Ÿæˆæ–°çš„åˆçº¦åœ°å€
3. **éœ€è¦æ›´æ–°å‰ç«¯** - å‰ç«¯å¿…é¡»æŒ‡å‘æ–°åˆçº¦åœ°å€

#### é‡æ–°éƒ¨ç½²çš„å½±å“

**éœ€è¦æ›´æ–°çš„åœ°æ–¹ï¼š**
1. âœ… **å‰ç«¯é…ç½®** - `contractInfo.ts` ä¸­çš„åˆçº¦åœ°å€
2. âœ… **ç”¨æˆ·è¿ç§»** - ç°æœ‰å¸‚åœºä»åœ¨æ—§åˆçº¦ä¸­
3. âœ… **æ•°æ®åŒæ­¥** - éœ€è¦ä»ä¸¤ä¸ªåˆçº¦è¯»å–æ•°æ®
4. âœ… **æ–‡æ¡£æ›´æ–°** - æ›´æ–°æ‰€æœ‰ç›¸å…³æ–‡æ¡£

#### éƒ¨ç½²æˆæœ¬ä¼°ç®—
- **Base Sepolia æµ‹è¯•ç½‘ï¼š** å…è´¹ï¼ˆä½¿ç”¨æµ‹è¯• ETHï¼‰
- **ä¸»ç½‘éƒ¨ç½²ï¼š** çº¦ $50-200ï¼ˆå–å†³äº Gas ä»·æ ¼å’Œåˆçº¦å¤æ‚åº¦ï¼‰

---

## ğŸ¯ æ¨èç­–ç•¥

### Phase 1-2ï¼ˆå½“å‰é˜¶æ®µï¼‰ï¼šä½¿ç”¨ç°æœ‰åˆçº¦

**ç†ç”±ï¼š**
1. âœ… å¿«é€ŸéªŒè¯æ¦‚å¿µ
2. âœ… é™ä½é£é™©
3. âœ… èŠ‚çœæˆæœ¬
4. âœ… å¯ä»¥ç«‹å³å¼€å§‹æµ‹è¯•

**å®æ–½ï¼š**
- ä½¿ç”¨å½“å‰ `MarketFactoryV2`
- å‰ç«¯å¤„ç†å…ƒæ•°æ®ï¼ˆIPFS + æœ¬åœ°æ˜ å°„ï¼‰
- æ¥å—åŠŸèƒ½é™åˆ¶

---

### Phase 3ï¼ˆä¸­æœŸï¼‰ï¼šè¯„ä¼°æ˜¯å¦éœ€è¦å‡çº§

**è¯„ä¼°æ ‡å‡†ï¼š**
1. ç”¨æˆ·åé¦ˆ - åŠŸèƒ½é™åˆ¶æ˜¯å¦å½±å“ç”¨æˆ·ä½“éªŒï¼Ÿ
2. ä½¿ç”¨é‡ - æ˜¯å¦æœ‰è¶³å¤Ÿç”¨æˆ·åˆ›å»ºå¸‚åœºï¼Ÿ
3. æŠ€æœ¯éœ€æ±‚ - æ˜¯å¦éœ€è¦é“¾ä¸Šå…ƒæ•°æ®ï¼Ÿ
4. æˆæœ¬æ•ˆç›Š - å‡çº§çš„æ”¶ç›Šæ˜¯å¦å¤§äºæˆæœ¬ï¼Ÿ

**å¦‚æœå†³å®šå‡çº§ï¼š**
1. è®¾è®¡æ–°åˆçº¦ï¼ˆMarketFactoryV3ï¼‰
2. åœ¨æµ‹è¯•ç½‘å……åˆ†æµ‹è¯•
3. éƒ¨ç½²åˆ°æµ‹è¯•ç½‘
4. å‰ç«¯é›†æˆ
5. ç”¨æˆ·æµ‹è¯•
6. ä¸»ç½‘éƒ¨ç½²ï¼ˆå¦‚æœå‡†å¤‡å°±ç»ªï¼‰

---

### Phase 4+ï¼ˆé•¿æœŸï¼‰ï¼šè€ƒè™‘æ¶æ„å‡çº§

**å¯èƒ½çš„æ”¹è¿›ï¼š**
1. **å¯å‡çº§åˆçº¦** - ä½¿ç”¨ Proxy æ¨¡å¼
2. **æ¨¡å—åŒ–è®¾è®¡** - åˆ†ç¦»æ ¸å¿ƒåŠŸèƒ½å’Œå…ƒæ•°æ®
3. **å¤šé“¾æ”¯æŒ** - è·¨é“¾å¸‚åœºåˆ›å»º
4. **DAO æ²»ç†** - ç¤¾åŒºç®¡ç†å¸‚åœºåˆ›å»ºè§„åˆ™

---

## ğŸ“Š å¯¹æ¯”è¡¨

| ç‰¹æ€§ | å½“å‰åˆçº¦ (V2) | æ”¹è¿›ç‰ˆåˆçº¦ (V3) |
|------|--------------|----------------|
| éƒ¨ç½²çŠ¶æ€ | âœ… å·²éƒ¨ç½² | âŒ éœ€è¦éƒ¨ç½² |
| å…ƒæ•°æ®æ”¯æŒ | âŒ æ—  | âœ… å®Œæ•´æ”¯æŒ |
| è‡ªåŠ¨æ± åˆ›å»º | âŒ æ‰‹åŠ¨ | âœ… è‡ªåŠ¨ï¼ˆå¯é€‰ï¼‰ |
| å¼€å‘é€Ÿåº¦ | âœ… å¿« | âš ï¸ éœ€è¦æ—¶é—´ |
| æˆæœ¬ | âœ… å…è´¹ï¼ˆå·²éƒ¨ç½²ï¼‰ | âš ï¸ éœ€è¦ Gas |
| ç”¨æˆ·ä½“éªŒ | âš ï¸ ä¸€èˆ¬ | âœ… ä¼˜ç§€ |
| æ‰©å±•æ€§ | âŒ å·® | âœ… å¥½ |
| é£é™© | âœ… ä½ | âš ï¸ ä¸­ç­‰ |

---

## ğŸ’¼ æœ€ç»ˆå»ºè®®

### å¯¹äº FYP é¡¹ç›®

**æ¨èï¼šç»§ç»­ä½¿ç”¨å½“å‰åˆçº¦ï¼ˆPhase 1-2ï¼‰**

**åŸå› ï¼š**
1. **æ—¶é—´é™åˆ¶** - FYP æœ‰æˆªæ­¢æ—¥æœŸï¼Œé‡æ–°éƒ¨ç½²ä¼šæ¶ˆè€—æ—¶é—´
2. **åŠŸèƒ½è¶³å¤Ÿ** - å½“å‰åˆçº¦å¯ä»¥å®Œæˆæ ¸å¿ƒåŠŸèƒ½æ¼”ç¤º
3. **å¯ä»¥æ”¹è¿›** - åœ¨æ–‡æ¡£ä¸­è¯´æ˜é™åˆ¶å’Œæœªæ¥æ”¹è¿›æ–¹å‘
4. **å±•ç¤ºèƒ½åŠ›** - å±•ç¤ºå¦‚ä½•åœ¨å‰ç«¯å¤„ç†åˆçº¦é™åˆ¶

**åœ¨ FYP æŠ¥å‘Šä¸­å¯ä»¥ï¼š**
- âœ… è¯´æ˜å½“å‰å®ç°
- âœ… åˆ†æé™åˆ¶å’ŒåŸå› 
- âœ… æå‡ºæ”¹è¿›æ–¹æ¡ˆï¼ˆMarketFactoryV3ï¼‰
- âœ… å±•ç¤ºå‰ç«¯å¦‚ä½•å¤„ç†é™åˆ¶
- âœ… è®¨è®ºæœªæ¥å‘å±•æ–¹å‘

---

### å¦‚æœå†³å®šå‡çº§åˆçº¦

**æ­¥éª¤ï¼š**
1. **è®¾è®¡æ–°åˆçº¦** - å‚è€ƒä¸Šé¢çš„ MarketFactoryV3 å»ºè®®
2. **æœ¬åœ°æµ‹è¯•** - ä½¿ç”¨ Hardhat/Truffle æµ‹è¯•
3. **æµ‹è¯•ç½‘éƒ¨ç½²** - éƒ¨ç½²åˆ° Base Sepolia
4. **å‰ç«¯é›†æˆ** - æ›´æ–° `contractInfo.ts`
5. **ç”¨æˆ·æµ‹è¯•** - å……åˆ†æµ‹è¯•æ–°åŠŸèƒ½
6. **æ–‡æ¡£æ›´æ–°** - æ›´æ–°æ‰€æœ‰ç›¸å…³æ–‡æ¡£

**æ—¶é—´ä¼°ç®—ï¼š**
- åˆçº¦å¼€å‘ï¼š2-3 å¤©
- æµ‹è¯•ï¼š1-2 å¤©
- å‰ç«¯é›†æˆï¼š1 å¤©
- æ€»è®¡ï¼š4-6 å¤©

---

## ğŸ“ æ€»ç»“

1. **å½“å‰é˜¶æ®µï¼š** ç»§ç»­ä½¿ç”¨ MarketFactoryV2 âœ…
2. **çŸ­æœŸï¼š** å‰ç«¯å¤„ç†å…ƒæ•°æ®ï¼Œæ¥å—é™åˆ¶
3. **ä¸­æœŸï¼š** è¯„ä¼°ç”¨æˆ·åé¦ˆï¼Œå†³å®šæ˜¯å¦å‡çº§
4. **é•¿æœŸï¼š** è€ƒè™‘å¯å‡çº§æ¶æ„æˆ–æ¨¡å—åŒ–è®¾è®¡

**å…³é”®ç‚¹ï¼š**
- æ™ºèƒ½åˆçº¦ä¸€æ—¦éƒ¨ç½²ä¸å¯ä¿®æ”¹
- æ›´æ–°åˆçº¦éœ€è¦é‡æ–°éƒ¨ç½²
- å½“å‰åˆçº¦è¶³å¤Ÿå®Œæˆ Phase 1 ç›®æ ‡
- å¯ä»¥åœ¨æ–‡æ¡£ä¸­è¯´æ˜é™åˆ¶å’Œæœªæ¥è®¡åˆ’

